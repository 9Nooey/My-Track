<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking üìç)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; font-family: 'Sarabun', sans-serif; padding-top: 20px; }
        .main-card { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .header-section { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 20px; text-align: center; }
        .control-panel { padding: 20px; background: #fff; border-bottom: 1px solid #eee; }
        .iframe-container { width: 100%; height: 600px; border: none; background: #fff; }
        .btn-shortcut { margin: 5px; border-radius: 20px; font-size: 0.9rem; }
    </style>
</head>
<body>

<div class="container mb-5">
    <div class="main-card">
        <div class="header-section">
            <h2 class="m-0">üöÑ Tracking </h2>
            <p class="small opacity-75 mb-0">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏£‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡πÑ‡∏ü</p>
        </div>

        <div class="control-panel text-center">
            <div class="row justify-content-center g-2">
                <div class="col-auto">
                    <input type="number" id="trainInput" class="form-control form-control-lg" placeholder="‡πÄ‡∏•‡∏Ç‡∏Ç‡∏ö‡∏ß‡∏ô" value="997" style="width: 200px;">
                </div>
                <div class="col-auto">
                    <button class="btn btn-primary btn-lg px-4" onclick="searchTrain()">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                </div>
            </div>

            <div class="mt-3">
                <span class="text-muted small">‡∏Ç‡∏ö‡∏ß‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: </span>
                <button class="btn btn-outline-dark btn-shortcut" onclick="quickSearch('997')">997 (‡πÑ‡∏õ)</button>
                <button class="btn btn-outline-dark btn-shortcut" onclick="quickSearch('998')">998 (‡∏Å‡∏•‡∏±‡∏ö)</button>
            </div>
        </div>

        <div class="position-relative">
            <div id="loader" class="text-center p-5 d-none">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-2 text-muted">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
            </div>

            <iframe id="trainFrame" name="trainFrame" class="iframe-container" src=""></iframe>
            
            <div class="text-center p-3 bg-light border-top">
                <p class="text-danger small mb-1">‚ö†Ô∏è ‡∏´‡∏≤‡∏Å‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ç‡∏≤‡∏ß</p>
                <a id="directLink" href="#" target="_blank" class="btn btn-sm btn-danger px-4">
                    üëâ ‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    // ‚úÖ ‡πÅ‡∏Å‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö (‡πÉ‡∏ä‡πâ 2023)
    const BASE_URL = "https://ttsview.railway.co.th/searchresult_2023.php";

    window.onload = function() {
        searchTrain(); // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    };

    function quickSearch(no) {
        document.getElementById('trainInput').value = no;
        searchTrain();
    }

    function searchTrain() {
        const trainNo = document.getElementById('trainInput').value;
        const iframe = document.getElementById('trainFrame');
        const loader = document.getElementById('loader');
        const directLink = document.getElementById('directLink');

        if (!trainNo) return;

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á URL
        const targetUrl = `${BASE_URL}?trainno=${trainNo}&lang=th`;

        // ‡πÅ‡∏™‡∏î‡∏á Loading
        loader.classList.remove('d-none');
        iframe.style.opacity = "0";

        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ URL
        iframe.src = targetUrl;
        directLink.href = targetUrl; // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏õ‡∏∏‡πà‡∏°‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô

        iframe.onload = function() {
            loader.classList.add('d-none');
            iframe.style.opacity = "1";
        };
    }
</script>

</body>
</html>
