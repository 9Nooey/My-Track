<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking üìç</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: 'Sarabun', sans-serif; padding: 20px; }
        .search-box { max-width: 500px; margin: 0 auto 20px auto; display: flex; gap: 10px; }
        
        /* ‡∏Å‡∏£‡∏≠‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏î‡∏°‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
        .result-frame-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            overflow: hidden;
            min-height: 400px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ */
        }
        
        iframe {
            width: 100%;
            height: 550px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
            border: none;
            /* ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô iframe ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏ö‡∏ö‡∏ô‡∏™‡∏∏‡∏î (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) */
            margin-top: -10px; 
        }
    </style>
</head>
<body>

    <div class="container text-center">
        <h3 class="mb-4">üöÜ Tracking</h3>
        
        <div class="search-box">
            <input type="number" id="trainInput" class="form-control form-control-lg" placeholder="‡πÄ‡∏•‡∏Ç‡∏Ç‡∏ö‡∏ß‡∏ô (‡πÄ‡∏ä‡πà‡∏ô 7)" value="7">
            <button class="btn btn-primary btn-lg" onclick="searchTrain()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
        </div>

        <div class="result-frame-container">
            <div id="loader" class="p-5 d-none">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-2 text-muted">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
            </div>
            <iframe id="trainFrame" name="trainFrame" src=""></iframe>
        </div>
        
        <p class="text-muted small mt-3">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Realtime üìç </p>
    </div>

<script>
    // ‚ö†Ô∏è ‡∏ô‡∏≥ URL ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠ 2 ‡∏°‡∏≤‡πÉ‡∏™‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö
    const GAS_URL = "https://script.google.com/macros/s/AKfycbwwBnDgiqKm5unQMv9BNb3DTNAyKVLiK0DWwTE3vtsCUIJFK9mHbugIrVFgyIPnaWkvwA/exec";

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
    window.onload = searchTrain;

    function searchTrain() {
        const trainNo = document.getElementById('trainInput').value;
        const iframe = document.getElementById('trainFrame');
        const loader = document.getElementById('loader');

        if (!trainNo) return;

        // ‡πÅ‡∏™‡∏î‡∏á Loader
        loader.classList.remove('d-none');
        iframe.style.opacity = "0"; // ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÇ‡∏´‡∏•‡∏î

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å URL ‡∏ú‡πà‡∏≤‡∏ô GAS
        iframe.src = `${GAS_URL}?train=${trainNo}`;

        iframe.onload = function() {
            loader.classList.add('d-none');
            iframe.style.opacity = "1"; // ‡πÇ‡∏ä‡∏ß‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à
        };
    }
</script>

</body>
</html>
